<div class="contents-box">

  <div class="left-contents shadow p-5 bg-white">
    <div class="pict-main">
      <%= image_tag(@micropost.picture.url) %>
    </div>

    <div class="date text-right">
      <%= icon('fas', 'heart')%><%= @micropost.favorites.count %>
      <%= icon('fas', 'comment')%><%= @micropost.comments.count %>
    </div>
    <div class="date text-right">
      <%= icon('fas', 'clock')%>
      <%= @micropost.created_at.strftime("%Y/%m/%d %H:%M") %>
      
      <% if @micropost.updated_at != @micropost.created_at %>
      →
      <%= @micropost.updated_at.strftime("%Y/%m/%d %H:%M") %>
      <% end %>
    </div>

    <div class="pict-group">

      <h3 class="pict-title pb-2">
        <%= @micropost.title %>
      </h3>
      <div class="pict-content pb-4">
        <%= @micropost.content %>
      </div>

    </div>
  </div>

  <div class="right-contents shadow p-5 bg-white ml-3">
      <%# ログイン中のユーザーメニュー %>
    <% if current_user?(@micropost.user) %>
      <div>
        <%= link_to @micropost.user.name, @micropost.user %>
      </div>
      <div class="btn-group pb-3 pt-3">
        <div class="page-link text-secondary d-inline-block rounded mr-1">
          <%= link_to edit_micropost_path(@micropost) do %>
            <%= icon('far', 'edit')%>編集する
          <% end %>
        </div>
        <div class="page-link text-secondary d-inline-block rounded mr-1">
          <%= link_to micropost_path(@micropost), method: :delete, data: { confirm: "本当に削除しますか？" } do %>
            <%= icon('fas', 'trash')%>削除する
          <% end %>
        </div>
      </div>
      <%# ログインしていないユーザーメニュー %>
    <% else %>
      <div>
        <%= link_to @micropost.user.name, @micropost.user %>さんの投稿
      </div>
      <div class="btn-group pb-3 pt-3">
        <div class="page-link text-secondary d-inline-block rounded mr-1">
          <% if !@micropost.favorite_users.include?(current_user) %>
            <%= link_to favorites_path(micropost_id: @micropost.id), method: :post do %>
              <%= icon('fas', 'heart')%>いいね！
            <% end %>
          <% else %>
            <%= link_to favorite_path(micropost_id: @micropost.id), method: :delete do %>
              <%= icon('fas', 'heart')%>いいね！済み
            <% end %>
          <% end %>
        </div>
        <div class="page-link text-secondary d-inline-block rounded mr-1">
          <%= icon('fas', 'share')%>シェア
        </div>
      </div>

    <% end %>

    <div class="comment-list">
      <p class="">こめんと</p>

      <%= form_for(@comment) do |f| %>
        <%= f.text_field :content %>
        <%= f.hidden_field :micropost_id, value: @micropost.id %>
        <%= f.submit "コメントする", class: "page-link text-secondary d-inline-block rounded" %>
      <% end %>

      <% @comments.each do |comment| %>
        <div class="border-bottom">
          <div>
            <%= comment.content %>
          </div>
          <div class="text-right">
            <%= comment.created_at.strftime("%Y/%m/%d %H:%M") %>
          </div>
        </div>
      <% end %>


    </div>
  </div>

</div>